# _api/rooms/
> L2 | 父级: /_api/CLAUDE.md

## 成员清单

index.ts: 聊天室列表端点，获取所有公开聊天室、用户加入的聊天室
[id].ts: 聊天室详情端点，获取聊天室信息、成员列表、最近消息

### 子目录模块
_helpers/ - 聊天室辅助函数，常量定义、权限检查、数据格式化
[id]/ - 聊天室操作端点，加入、离开、更新设置、删除

## 依赖关系
- 依赖 Redis 存储聊天室数据
- 依赖 Pusher 实时通知
- 依赖 _utils/auth 认证验证
- 被前端聊天应用调用

## 聊天室约束
1. 聊天室 ID 使用 UUID 生成，保证唯一性
2. 公开聊天室任何人可见，私有聊天室需要邀请
3. 聊天室创建者是管理员，可以删除聊天室
4. 成员列表存储到 Redis Set，支持快速查询
5. 聊天室消息存储到 Redis List，限制最大长度
6. 离开聊天室时清理成员列表和在线状态
7. 删除聊天室时清理所有相关数据（消息、成员、设置）

[PROTOCOL]: 变更时更新此头部，然后检查 CLAUDE.md
